<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>create_and_send_new_invoice_line_items â€¢ rcc.billing</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="create_and_send_new_invoice_line_items">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rcc.billing</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.44.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/billable_candidates.html">billable_candidates</a></li>
    <li><a class="dropdown-item" href="../articles/billing_for_support.html">Billing for REDCap support work</a></li>
    <li><a class="dropdown-item" href="../articles/cleanup_bad_email_addresses.html">cleanup_bad_email_addresses</a></li>
    <li><a class="dropdown-item" href="../articles/cleanup_bad_project_pi_email_addresses.html">cleanup_bad_project_pi_email_addresses</a></li>
    <li><a class="dropdown-item" href="../articles/cleanup_project_ownership_table.html">cleanup_project_ownership_table</a></li>
    <li><a class="dropdown-item" href="../articles/create_and_send_new_invoice_line_items.html">create_and_send_new_invoice_line_items</a></li>
    <li><a class="dropdown-item" href="../articles/delete_abandoned_projects.html">delete_abandoned_projects</a></li>
    <li><a class="dropdown-item" href="../articles/novel_concepts.html">Novel Concepts</a></li>
    <li><a class="dropdown-item" href="../articles/remind_owners_to_review_ownership.html">remind_owners_to_review_ownership</a></li>
    <li><a class="dropdown-item" href="../articles/request_correction_of_bad_ownership_data.html">request_correction_of_bad_ownership_data</a></li>
    <li><a class="dropdown-item" href="../articles/revenue_status_and_projections.html">revenue_status_and_projections</a></li>
    <li><a class="dropdown-item" href="../articles/sequester_orphans.html">sequester_orphans</a></li>
    <li><a class="dropdown-item" href="../articles/sequester_unpaid_projects.html">sequester_unpaid_projects</a></li>
    <li><a class="dropdown-item" href="../articles/update_free_support_time_remaining.html">update_free_support_time_remaining</a></li>
    <li><a class="dropdown-item" href="../articles/update_invoice_line_items_with_invoicing_details.html">update_invoice_line_items_with_invoicing_details</a></li>
    <li><a class="dropdown-item" href="../articles/update_probono_service_request_records.html">update_probono_service_request_records</a></li>
    <li><a class="dropdown-item" href="../articles/update_project_billable_attribute.html">update_project_billable_attribute</a></li>
    <li><a class="dropdown-item" href="../articles/warn_owners_of_impending_bill.html">warn_owners_of_impending_bill</a></li>
    <li><a class="dropdown-item" href="../articles/when_jobs_run.html">When jobs run</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ctsit/rcc.billing/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="create_and_send_new_invoice_line_items_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="create_and_send_new_invoice_line_items_files/d3-3.3.8/d3.min.js"></script><script src="create_and_send_new_invoice_line_items_files/dagre-0.4.0/dagre-d3.min.js"></script><link href="create_and_send_new_invoice_line_items_files/mermaid-0.3.0/dist/mermaid.css" rel="stylesheet">
<script src="create_and_send_new_invoice_line_items_files/mermaid-0.3.0/dist/mermaid.slim.min.js"></script><link href="create_and_send_new_invoice_line_items_files/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="create_and_send_new_invoice_line_items_files/chromatography-0.1/chromatography.js"></script><script src="create_and_send_new_invoice_line_items_files/DiagrammeR-binding-1.0.11/DiagrammeR.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>create_and_send_new_invoice_line_items</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ctsit/rcc.billing/blob/main/vignettes/create_and_send_new_invoice_line_items.Rmd" class="external-link"><code>vignettes/create_and_send_new_invoice_line_items.Rmd</code></a></small>
      <div class="d-none name"><code>create_and_send_new_invoice_line_items.Rmd</code></div>
    </div>

    
    
<p><code>create_and_send_new_invoice_line_items</code> decides what
services to bill at the beginning of each month. It reads service
request data and redcap project data to create a dataset of records that
will be used by the fiscal team to create line items on invoices. The
dataset will include records that describe service request work
completed in the previous month. The dataset will also have one record
for each REDCap project with an anniversary in the previous month and
also meets several other criteria.</p>
<div class="figure" style="text-align: center">
<div id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:850px;height:300px;" class="DiagrammeR html-widget"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"diagram":"\ngraph TD\n    subgraph Service Request Suppliers\n        SRS1[REDCap Database]\n        SRS2[RCC Billing database]\n        SRS3[REDCap Service Request project]\n    end\n    subgraph Service Request Inputs\n        SRI1[redcap_entity_project_ownership]\n        SRI2[redcap_projects]\n        SRI3[redcap_user_information]\n        SRI4[invoice_line_item]\n        SRI7[REDCap Service Requests]\n    end\n\n    subgraph Project Suppliers\n        S1[REDCap Database]\n        S2[RCC Billing database]\n    end\n    subgraph Project Inputs\n        I1[redcap_entity_project_ownership]\n        I2[redcap_projects]\n        I3[redcap_user_information]\n        I4[invoice_line_item]\n        I5[invoice_line_item_communications]\n        I6[service_instance]\n    end\n\n    subgraph Process\n        P1[Get service request line items]\n        P2[Get project line items]\n        P3[Combine line items]\n        P4[Identify new service instances]\n        P5[Combine loggable data]\n        P6[Create new invoice_line_item_communications records]\n    end\n    subgraph Outputs\n        O1[invoice_line_item dataset]\n        O2[invoice_line_item inserts]\n        O3[invoice_line_item_communications inserts]\n        O4[service_instance updates]\n        O5[Log data]\n    end\n    subgraph Customers\n        C1[RCC Billing System]\n        C2[RCC Billing System: rcc_job_log]\n        C3[Fiscal team]\n    end\n    SRS1 --> SRI1\n    SRS1 --> SRI2\n    SRS1 --> SRI3\n    SRS2 --> SRI4\n    SRS3 --> SRI7\n\n    S1 --> I1\n    S1 --> I2\n    S1 --> I3\n    S2 --> I4\n    S2 --> I5\n    S2 --> I6\n    \n    SRI1 --> P1\n    SRI2 --> P1\n    SRI3 --> P1\n    SRI4 --> P1\n    SRI7 --> P1\n\n    I1 --> P2\n    I2 --> P2\n    I3 --> P2\n    I4 --> P2\n    \n    P1 --> P3\n    P2 --> P3\n    \n    I6 --> P4\n    P3 --> P4\n    \n    I5 --> P6\n    P3 --> P6\n    \n    P3 --> O1\n    P3 --> O2\n    \n    P6 --> O3\n    \n    P4 --> O4\n    \n    P3 --> P5\n    P4 --> P5\n    \n    P5 --> O5\n    \n    O1 --> C3\n    O2 --> C1\n    O3 --> C1\n    O4 --> C1\n    O5 --> C2\n"},"evals":[],"jsHooks":[]}</script><p class="caption">
create_and_send_new_invoice_line_items data processing workflow
</p>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Philip Chase, Laurence James-Woodley, Kyle Chesney, Michael Bentz, Sai Pavan Kamma.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
